function Hd = IIRv2
%IIRV2 Returns a discrete-time filter object.

% MATLAB Code
% Generated by MATLAB(R) 9.9 and DSP System Toolbox 9.11.
% Generated on: 17-Jun-2021 10:58:30

% Butterworth Lowpass filter designed using FDESIGN.LOWPASS.

% All frequency values are in Hz.
Fs = 5000000;  % Sampling Frequency

Fpass = 200000;      % Passband Frequency
Fstop = 400000;      % Stopband Frequency
Apass = 1;           % Passband Ripple (dB)
Astop = 20;          % Stopband Attenuation (dB)
match = 'stopband';  % Band to match exactly

% Construct an FDESIGN object and call its BUTTER method.
h  = fdesign.lowpass(Fpass, Fstop, Apass, Astop, Fs);
Hd = design(h, 'butter', 'MatchExactly', match);
% Set the arithmetic property.
set(Hd, 'Arithmetic', 'fixed', ...
    'CoeffWordLength', 16, ...
    'CoeffAutoScale', true, ...
    'ProductMode', 'Fullprecision', ...
    'AccumMode', 'Fullprecision', ...
    'StateWordLength', 16, ...
    'StateFracLength', 15, ...
    'SectioninputWordLength', 16, ...
    'SectioninputAutoScale', true, ...
    'SectionoutputWordLength', 16, ...
    'SectionoutputAutoScale', true, ...
    'InputWordLength', 16, ...
    'inputFracLength', 15, ...
    'OutputWordLength', 34, ...
    'OutputMode', 'AvoidOverflow', ...
    'signed',        true, ...
    'RoundMode',     'convergent', ...
    'OverflowMode',  'Wrap', ...
    'CastBeforeSum', false);


% Set the arithmetic property.
set(Hd, 'Arithmetic', 'fixed', ...
    'CoeffWordLength', 16, ...
    'CoeffAutoScale', true, ...
    'ProductMode', 'Fullprecision', ...
    'AccumMode', 'Fullprecision', ...
    'StateWordLength', 16, ...
    'StateFracLength', 15, ...
    'SectioninputWordLength', 16, ...
    'SectioninputAutoScale', true, ...
    'SectionoutputWordLength', 16, ...
    'SectionoutputAutoScale', true, ...
    'InputWordLength', 16, ...
    'inputFracLength', 0, ...
    'OutputWordLength', 14, ...
    'OutputMode', 'AvoidOverflow', ...
    'signed',        true, ...
    'RoundMode',     'convergent', ...
    'OverflowMode',  'Wrap', ...
    'CastBeforeSum', false);



% Convert the filter to the Lattice Autoregressive Moving-Average (ARMA)
% structure.
Hd = convert(Hd, 'latticearma');

% Convert the filter to the Direct-Form II structure.
Hd = convert(Hd, 'df2');
% Set the arithmetic property.
set(Hd, 'Arithmetic', 'fixed', ...
    'CoeffWordLength', 16, ...
    'CoeffAutoScale', true, ...
    'ProductMode', 'Fullprecision', ...
    'AccumMode', 'Fullprecision', ...
    'StateWordLength', 16, ...
    'StateFracLength', 15, ...
    'InputWordLength', 16, ...
    'inputFracLength', 0, ...
    'OutputWordLength', 14, ...
    'OutputMode', 'AvoidOverflow', ...
    'signed',        true, ...
    'RoundMode',     'convergent', ...
    'OverflowMode',  'Wrap', ...
    'CastBeforeSum', false);

denormalize(Hd);


% [EOF]
